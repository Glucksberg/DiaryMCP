# DiaryMCP Manifest
# Arquivo de configuração principal do sistema

version: "1.0"
protocol_version: "1.0"

# Informações do Projeto
project:
  name: "[PROJECT_NAME]"
  type: "[PROJECT_TYPE]"
  path: "[PROJECT_PATH]"
  installed_at: "[INSTALL_DATE]"
  
# Configurações Git
git:
  enabled: [GIT_ENABLED]
  default_branch: "[DEFAULT_BRANCH]"
  track_commits: true
  track_diffs: true
  max_diff_lines: 500

# Estrutura de Pastas
paths:
  root: ".diary"
  data: ".diary/data"
  entries: ".diary/data/entries"
  engine: ".diary/engine"
  io: ".diary/io"
  scripts: ".diary/scripts"
  
# Configurações de Captura
capture:
  auto_detect:
    - git_status
    - modified_files
    - todos_fixmes
    - recent_files
  
  timeframes:
    recent_files: "2h"    # Arquivos modificados nas últimas 2 horas
    session_timeout: "4h" # Máximo de duração de uma sessão
    
  file_patterns:
    include:
      - "src/**/*"
      - "lib/**/*" 
      - "app/**/*"
      - "*.js"
      - "*.ts" 
      - "*.py"
      - "*.java"
      - "*.go"
      - "*.rs"
      - "*.md"
    exclude:
      - "node_modules/**/*"
      - ".git/**/*"
      - "*.log"
      - "*.tmp"
      - ".diary/**/*"

# Configurações de Narrativa
narrative:
  modes:
    technical:
      enabled: true
      max_items_checklist: 7
      include_risks: true
      include_tradeoffs: true
      
    personal:
      enabled: true
      include_emotions: true
      include_insights: true
      connect_sessions: true

# Sistema de Tags
tags:
  auto_detect: true
  categories:
    - feature
    - bug  
    - refactor
    - risk
    - insight
    - learning
    - blocker
    - success
    
  patterns:
    feature: ["feat:", "feature:", "add:", "implement"]
    bug: ["bug:", "fix:", "error:", "issue:"]
    refactor: ["refactor:", "cleanup:", "improve:"]
    risk: ["risk:", "danger:", "warning:", "careful:"]
    insight: ["insight:", "learned:", "discovery:", "aha:"]

# Sistema de Conexões
connections:
  auto_link: true
  types:
    - temporal   # Baseado em tempo
    - branch     # Mesmo branch/feature
    - files      # Arquivos em comum
    - semantic   # Tags/tópicos similares
    - thread     # Continuação de pensamento
    
  thresholds:
    file_overlap: 0.3      # 30% arquivos em comum
    semantic_similarity: 0.4 # 40% tags similares
    temporal_window: "24h"   # Janela para links temporais

# Configurações de Fallback
fallback_modes:
  no_git:
    use: filesystem_timestamps
    track: file_modifications_only
    
  corrupted_data:
    action: quarantine_and_rebuild  
    preserve: user_notes_always
    backup_suffix: ".corrupted"

# Configurações de Performance
performance:
  max_entries_memory: 1000
  archive_after_days: 90
  cleanup_temp_files: true
  compress_old_entries: false

# Configurações de Privacidade
privacy:
  exclude_patterns:
    - "*.key"
    - "*.pem" 
    - "*.env"
    - "*password*"
    - "*secret*"
    - "*token*"
  
  sanitize_paths: true
  anonymize_user_paths: false

# Configurações de Exportação
export:
  formats:
    - json
    - markdown
    - html
  
  templates:
    markdown: "templates/export/markdown.md"
    html: "templates/export/html.html"

# Comandos Personalizados do Projeto
custom_commands: []

# Integrações Opcionais (futuro)
integrations:
  slack: false
  calendar: false
  music: false
  screenshots: false

# Configurações de Debug
debug:
  enabled: false
  log_level: "info"
  log_file: ".diary/debug.log"
  verbose_capture: false

# Metadados
metadata:
  created_by: "DiaryMCP Installer"
  schema_version: "1.0"
  last_updated: "[INSTALL_DATE]"
  
# Validação do Sistema  
validation:
  required_files:
    - ".diary/ativar.md"
    - ".diary/manifest.yaml" 
    - ".diary/engine/rules.md"
    - ".diary/data/index.json"
    - ".diary/data/tags.json"
    
  required_directories:
    - ".diary/data/entries"
    - ".diary/io"
    - ".diary/scripts"
